# 要件定義書：TODOアプリ 優先度自動調整機能

**作成日時**: 2025年11月24日 05:12:12 JST
**最終更新日時**: 2025年11月24日 05:17:22 JST
**バージョン**: 1.1

---

## 1. 概要

### 1.1 機能の目的
タスク管理を正確に行うため、タスクの状態変化に応じて優先度を自動的に調整する機能を提供する。

### 1.2 対象ユーザー
個人利用者

---

## 2. 主要機能

### 2.1 自動優先度調整
タスクの種類や緊急度に基づいて、優先度をリアルタイムで自動調整する。

#### 調整基準
- **タスクの種類**: 緊急度など、一般的なタスク分類を考慮
- **緊急度レベル**:
  - 緊急
  - 通常
  - 低優先度

#### 調整タイミング（トリガー）
以下のタスク状態変更時にリアルタイムで優先度を再計算する：
- タスクの新規作成
- タスクの種類変更
- タスクの緊急度変更
- タスクの完了状態変更
- タスクの期限変更
- その他、タスクの属性が変更されたとき

### 2.2 手動優先度調整機能
ユーザーはいつでも手動でタスクの優先度を設定・変更できる。

#### 優先度レベル
- **高**: 最優先で処理すべきタスク
- **中**: 通常の優先度
- **低**: 時間があるときに処理するタスク

#### 手動調整の動作
- ユーザーが手動で優先度を設定すると、手動設定フラグが立つ
- 手動設定フラグが立っているタスクは、自動調整の影響を**受けない**
- ユーザーはいつでも優先度を変更可能（高⇔中⇔低の切り替え）

#### 自動調整への復帰
- 手動設定を解除する機能を提供
- 解除すると手動設定フラグがクリアされ、再び自動調整の対象となる
- 解除後は、現在のタスク状態に基づいて優先度が自動計算される

### 2.3 優先度の表示
- 自動調整された優先度と手動設定された優先度を区別して表示
- ユーザーが現在の優先度がどのように決定されたか把握できるようにする

---

## 3. 優先順位

### 3.1 必須機能（Must Have）
1. タスクの種類・緊急度に基づく自動優先度計算
2. タスク状態変更時のリアルタイム再計算
3. 手動優先度調整機能（高・中・低の3段階）
4. 手動設定優先度の保護機能
5. 手動設定の解除機能（自動調整への復帰）

### 3.2 推奨機能（Should Have）
1. 優先度の決定理由の表示（自動/手動の区別）
2. 自動調整アルゴリズムの設定変更機能

### 3.3 オプション機能（Could Have）
1. 優先度変更履歴の記録
2. 優先度調整の通知機能

---

## 4. 制約事項

### 4.1 利用環境
- 個人利用を前提とした設計
- 複数ユーザーやチーム利用は考慮しない

### 4.2 技術的制約
- パフォーマンス: 個人利用規模（数百〜数千タスク程度）を想定
- リアルタイム処理のため、優先度計算は高速に実行される必要がある
- 既存のタスクデータ構造との互換性を保つ

### 4.3 機能的制約
- 手動設定が最優先: 自動調整よりもユーザーの意思を尊重
- 緊急度など一般的な分類のみをサポート（複雑なカスタム分類は非対応）

---

## 5. データ要件

### 5.1 タスクデータに必要な属性
- タスクID
- タスク名
- タスクの種類（カテゴリー）
- 緊急度レベル
- 優先度レベル（高・中・低の3段階）
- 手動設定フラグ（boolean）
- 作成日時
- 更新日時
- 完了状態

### 5.2 優先度計算に使用するパラメータ
- 緊急度レベル
- タスクの種類
- 手動設定フラグ

---

## 6. 非機能要件

### 6.1 パフォーマンス
- 優先度の再計算は100ms以内に完了すること
- UIの応答性を損なわないこと

### 6.2 ユーザビリティ
- 自動調整された優先度が直感的に理解できること
- 手動での優先度変更が簡単に行えること（高・中・低の切り替え）
- 手動設定の解除（自動調整への復帰）が明確で簡単に行えること

### 6.3 保守性
- 優先度計算アルゴリズムが変更可能な設計とすること
- 将来的な機能拡張に対応できる柔軟な構造とすること

---

## 7. 想定される実装アプローチ

### 7.1 優先度計算アルゴリズムの例
```
IF タスク.手動設定フラグ == true THEN
    優先度 = タスク.手動優先度  // 高・中・低のいずれか
ELSE
    優先度 = 計算優先度(タスク.緊急度, タスク.種類)  // 自動計算
END IF
```

### 7.2 手動優先度調整のUI例
- **優先度の変更**: プルダウンメニューまたはボタンで「高」「中」「低」を選択
- **自動調整への復帰**: 「自動調整に戻す」ボタンまたはチェックボックス
- **状態の表示**: アイコンやラベルで「手動設定」または「自動調整」を明示

### 7.3 リアルタイム更新の実装
- タスク属性変更時にイベントをトリガー
- 影響を受けるタスクの優先度を再計算
- UIに反映

---

## 8. 今後の検討事項

- 期限（デッドライン）を考慮した優先度調整の追加
- タスク間の依存関係に基づく優先度調整
- 完了予定時間を考慮した調整
- ユーザー行動の学習による優先度最適化

---

## 9. 承認

| 役割 | 氏名 | 承認日 |
|------|------|--------|
| 要件定義者 | - | 2025年11月24日 |
| レビュアー | - | - |
| 承認者 | - | - |

---

**変更履歴**

| バージョン | 日付 | 変更内容 | 変更者 |
|-----------|------|----------|--------|
| 1.0 | 2025年11月24日 | 初版作成 | - |
| 1.1 | 2025年11月24日 | 手動優先度調整機能の詳細化：優先度レベル（高・中・低）の明確化、自動調整への復帰機能の追加、UI例の追加 | - |
